---
alwaysApply: true
---

# Project Structure

This document outlines the directory structure and important files in the Pursue AI Test project.

## Root Directory

```
pursue-ai-test/
├── .cursor/              # Cursor IDE configuration
├── assets/               # Game assets
├── out/                  # Build output (web assets)
├── src/                  # Source code
├── target/               # Rust build artifacts (generated)
├── Cargo.toml           # Rust project manifest
├── Cargo.lock           # Dependency lock file
├── README.md            # Project documentation
└── state-machine-img.png # State machine diagram
```

## Source Code Structure (`src/`)

### Main Entry Point

- **`main.rs`** - Application entry point, Bevy app setup, main game loop, and system registration

### Core Modules

- **`level.rs`** - Level generation and management, polygon generation for game world
- **`collisions.rs`** - Collision detection and handling system
- **`utils.rs`** - Utility functions and helpers

### AI Module (`src/ai/`)

The AI system is organized into several submodules:

```
src/ai/
├── mod.rs                    # AI module root, exports all AI components
├── a_star.rs                 # A* pathfinding algorithm implementation
├── pathfinding.rs            # Pathfinding graph and plugin
├── platformer_ai.rs          # Platformer-specific AI behaviors
└── pursue_ai/                # Pursue AI state machine implementation
    ├── mod.rs                # Pursue AI module root
    ├── movement.rs           # Movement logic for pursue AI
    └── wander.rs             # Wander state implementation
```

#### AI Module Details

- **`ai/mod.rs`** - Main AI module file, exports pathfinding, platformer AI, and pursue AI modules
- **`ai/a_star.rs`** - A\* pathfinding algorithm for navigation
- **`ai/pathfinding.rs`** - Pathfinding graph data structure and Bevy plugin
- **`ai/platformer_ai.rs`** - Platformer-specific AI behaviors and plugin
- **`ai/pursue_ai/mod.rs`** - Pursue AI module root, exports PursueAI, PursueAIPlugin, and PursueAIState
- **`ai/pursue_ai/movement.rs`** - Movement logic for pursue AI agents
- **`ai/pursue_ai/wander.rs`** - Wander state implementation for AI behavior

**Note:** The `ai/pathfinding/` directory exists but is currently empty.

## Configuration Files

- **`Cargo.toml`** - Rust project manifest with dependencies:

  - `bevy = "0.17.3"` - Game engine
  - `rand = "0.9"` - Random number generation
  - `serde` - Serialization framework
  - `serde_json` - JSON serialization

- **`Cargo.lock`** - Dependency lock file (auto-generated, do not edit manually)

## Asset Files

- **`assets/level.json`** - Level data file (JSON format)

## Build Output

- **`out/`** - Contains web build output:

  - `index.html` - HTML entry point
  - `index.css` - Stylesheet

- **`target/`** - Rust build artifacts (generated by Cargo, should be gitignored)

## Cursor Configuration

- **`.cursor/rules/`** - Cursor IDE rules directory:

  - `cursor-rules.mdc` - Guidelines for creating cursor rules
  - `self-improvement.mdc` - Self-improvement patterns and guidelines
  - `project-structure.mdc` - This file

- **`.cursor/commands/`** - Cursor command definitions:
  - `generate-agentsmd.md` - Command for generating agent documentation

## Important Notes

1. **Module Organization**: The project follows Rust module conventions with `mod.rs` files serving as module roots
2. **Bevy Framework**: Uses Bevy 0.17.3 game engine with ECS (Entity Component System) architecture
3. **AI State Machine**: The pursue AI implements a state machine with states like Wander, Pursue, Search, and Attack (see README.md)
4. **Pathfinding**: Uses A\* algorithm for navigation, with a pathfinding graph system
5. **Build Artifacts**: `target/` directory contains compiled code and should not be committed to version control

## File Naming Conventions

- Rust source files use `.rs` extension
- Module files are typically named `mod.rs` or match the module name
- Cursor rules use `.mdc` extension and kebab-case naming
- Configuration files follow standard Rust/Cargo conventions
